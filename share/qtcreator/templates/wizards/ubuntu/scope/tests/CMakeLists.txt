
# Google Mock unfortunately has to be compiled from source
include(FindGMock)

@if "%ContentType%" == "network"
# We need process-cpp to launch the python test server
pkg_check_modules(
  TEST
  process-cpp
  REQUIRED
)
@endif

# Include our test library headers
include_directories(
  ${GTEST_INCLUDE_DIRS}
  ${GMOCK_INCLUDE_DIRS}
  ${TEST_INCLUDE_DIRS}
)

@if "%ContentType%" == "network"
# Where to find the test server binary
add_definitions(
  -DFAKE_SERVER="${CMAKE_CURRENT_SOURCE_DIR}/server/server.py"
)
@endif

# Add the unit tests
add_subdirectory(unit)
